<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension
         point="org.bonitasoft.studio.expression.proposalListener">
      <proposalListner
            name="%createDocumentLabel"
            providerClass="org.bonitasoft.studio.document.ui.DocumentProposalListener"
            type="TYPE_DOCUMENT">
      </proposalListner>
      <proposalListner
            name="%createDocumentLabel"
            providerClass="org.bonitasoft.studio.document.ui.DocumentProposalListener"
            type="DOCUMENT_REF_TYPE">
      </proposalListner>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections
            contributorId="org.bonitasoft.studio.diagram">
         <propertySection
               class="org.bonitasoft.studio.document.ui.DocumentPropertySection"
               filter="org.bonitasoft.studio.document.ui.DocumentSectionFilter"
               id="section.general.tab.document"
               tab="tab.document"
               viewID="org.bonitasoft.studio.views.properties.process.data">
         </propertySection>
      </propertySections>
   </extension>
   <extension
         point="org.bonitasoft.studio.common.barResourcesProvider">
      <barResourceProvider
            providerClass="org.bonitasoft.studio.document.core.expression.DocumentBarResourceProvider">
      </barResourceProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.expression.expressionProvider">
      <expressionProvider
            providerClass="org.bonitasoft.studio.document.core.expression.DocumentObjectExpressionProvider">
      </expressionProvider>
      <expressionProvider
            providerClass="org.bonitasoft.studio.document.core.expression.DocumentReferenceExpressionProvider">
      </expressionProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.repositoryStore">
      <repositoryStore
            class="org.bonitasoft.studio.document.core.repository.DocumentRepositoryStore">
      </repositoryStore>
   </extension>
   <extension
         point="org.bonitasoft.studio.bosArchiveProvider">
      <bosArchiveProvider
            providerClass="org.bonitasoft.studio.document.core.repository.DocumentFilseStoreProvider">
      </bosArchiveProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.engine.definition.builder">
      <EngineDefinitionBuilder
            class="org.bonitasoft.studio.document.core.export.DocumentEngineDefinitionBuilder">
      </EngineDefinitionBuilder>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.synchronizer">
      <synchronier
            class="org.bonitasoft.studio.document.configuration.AdditionalResourcesConfigurationSyncronizer">
      </synchronier>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.bonitasoft.studio.document.propertyTester.BonitaResourcePropertyTester"
            id="org.bonitasoft.studio.document.propertyTester"
            namespace="org.bonitasoft.studio.document"
            properties="isResourceFolder"
            type="org.eclipse.core.runtime.IAdaptable">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.bonitasoft.studio.application.project.explorer?after=group.import">
         <command
               commandId="org.bonitasoft.studio.document.import.command"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeMenuSelection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <test
                              property="org.bonitasoft.studio.document.isResourceFolder">
                        </test>
                     </iterate>
                  </and>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.bonitasoft.studio.application.project.explorer?after=group.manage.dependencies">
         <command
               commandId="org.bonitasoft.studio.document.manageResources.command"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeMenuSelection">
                  <and>
                     <count
                           value="1">
                     </count>
                     <or>
                        <iterate>
                           <instanceof
                                 value="org.eclipse.core.resources.IProject">
                           </instanceof>
                           <test
                                 property="org.bonitasoft.studio.application.isBonitaProject">
                           </test>
                        </iterate>
                     </or>
                  </and>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         id="org.bonitasoft.studio.document.fragment"
         point="org.eclipse.e4.workbench.model">
      <fragment
            uri="fragment.e4xmi"
            apply="always">
      </fragment>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="org.bonitasoft.studio.document.manageResources.command"
            icon="icons/Document.gif">
      </image>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.bonitasoft.studio.document.core.repository.DocumentFileStore"
            class="org.bonitasoft.studio.document.ui.internal.DisplayableAdapterFactory">
         <adapter
               type="org.bonitasoft.studio.common.ui.IDisplayable">
         </adapter>
      </factory>
   </extension>

</plugin>
