<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="connectorWizard" name="Custom Connector Wizard" schema="schema/connectorWizard.exsd"/>
   <extension-point id="connectorDefinitionMapper" name="Connector Definition Mapper" schema="schema/connectorMapper.exsd"/>
   <extension-point id="connectorDefFilter" name="Connector Definition Filter" schema="schema/connectorDefFilter.exsd"/>
   
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.NewConnectorDefinitionHandler"
            id="org.bonitasoft.studio.connectors.newDefinition"
            name="%newConnectorDefinition">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.EditConnectorDefinitionHandler"
            id="org.bonitasoft.studio.connectors.editDefinition"
            name="%editDefinition">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.ExportConnectorHandler"
            id="org.bonitasoft.studio.connectors.exportConnector"
            name="%exportConnector">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.ImportConnectorHandler"
            id="org.bonitasoft.studio.connectors.importConnector"
            name="%importConnector">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.NewConnectorImplementationHandler"
            id="org.bonitasoft.studio.connectors.newImplementation"
            name="%newConnectorImplementation">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.EditConnectorImplementationHandler"
            id="org.bonitasoft.studio.connectors.editImplementation"
            name="%editConnectorImplementation">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.TestConnectorWizardHandler"
            id="org.bonitasoft.studio.connectors.testConnector"
            name="%testConnector">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.connectors.handler.EditConnectorConfigurationHandler"
            id="org.bonitasoft.studio.connectors.editConnectorConfiguration"
            name="%editConnectorConfiguration">
      </command>
	</extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs
            contributorId="org.bonitasoft.studio.diagram">
         <propertyTab
               afterTab="tab.operations"
               category="domain"
               id="tab.connectors.out"
               label="%tab.connectors.out">
         </propertyTab>
         <propertyTab
               category="domain"
               id="tab.connectors.in"
               label="%tab.connectors.in">
         </propertyTab>
      </propertyTabs>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections
            contributorId="org.bonitasoft.studio.diagram">
         <propertySection
              class="org.bonitasoft.studio.connectors.ui.property.section.ConnectorOutSection"
              enablesFor="1"
              filter="org.bonitasoft.studio.connectors.ui.property.filter.ConnectableElementWithoutSendTaskAndSubProcessEvent"
              id="ConnectorsOutSection"
              tab="tab.connectors.out"
              viewID="org.bonitasoft.studio.views.properties.process.execution">
         </propertySection>
         <propertySection
               class="org.bonitasoft.studio.connectors.ui.property.section.ConnectorInSection"
               enablesFor="1"
               filter="org.bonitasoft.studio.connectors.ui.property.filter.ConnectableElementWithoutSendTaskAndSubProcessEvent"
               id="ConnectorsInSection"
               tab="tab.connectors.in"
               viewID="org.bonitasoft.studio.views.properties.process.execution">
         </propertySection>
      </propertySections>
   </extension>
   <extension
         point="org.bonitasoft.studio.repositoryStore">
      <repositoryStore
            class="org.bonitasoft.studio.connectors.repository.ConnectorImplRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.connectors.repository.ConnectorConfRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.connectors.repository.ConnectorDefRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.connectors.repository.ConnectorSourceRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.connectors.repository.DatabaseConnectorPropertiesRepositoryStore">
      </repositoryStore>
   </extension>
   <extension
         point="org.bonitasoft.studio.expression.expressionProvider">
      <expressionProvider
            providerClass="org.bonitasoft.studio.connectors.expression.ConnectorOutputExpressionProvider">
      </expressionProvider>
      <expressionProvider
            providerClass="org.bonitasoft.studio.connectors.expression.ConnectorExpressionProvider">
      </expressionProvider>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.bonitasoft.studio.development?before=org.bonitasoft.studio.dependencies.manageJars">
             <menu
                   icon="icons/connector.png"
                   id="org.bonitasoft.studio.menu.connector"
                   label="%connectMenu_Label">
                <command
                      commandId="org.bonitasoft.studio.connectors.newDefinition"
                      icon="icons/connector_def-new.png"
                      style="push">
                </command>
            <command
                  commandId="org.bonitasoft.studio.connectors.editDefinition"
                  icon="icons/connector_def-edit.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.connectors.connectoSeparator1"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.connectors.newImplementation"
                  icon="icons/connector_implem-new.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.connectors.editImplementation"
                  icon="icons/connector_implem-edit.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.connectors.connectorSeparator4"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.connectors.testConnector"
                  icon="icons/test.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.connectors.connectorSeparator3"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.connectors.exportConnector"
                  icon="icons/export_connector.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.connectors.importConnector"
                  icon="icons/import_connector.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.connectors.connectorSeparator5"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.connectors.editConnectorConfiguration"
                  icon="icons/editConfiguration.png"
                  style="push">
            </command>
         	<visibleWhen
                  checkEnabled="true">
             <reference
                   definitionId="isBonitaPerspectiveActive">
             </reference>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.bonitasoft.studio.application.project.explorer.new">
         <separator
               name="groupConnector1"
               visible="true">
         </separator>
         <command
               commandId="org.bonitasoft.studio.connectors.newDefinition"
               icon="icons/connector_def-new.png"
               label="%newConnectorDefMenu"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <and>
                  <count
                        value="1">
                  </count>
                  <or>
                     <iterate>
                        <instanceof
                              value="org.eclipse.core.resources.IProject">
                        </instanceof>
                        <test
                              property="org.bonitasoft.studio.application.isBonitaProject">
                        </test>
                     </iterate>
                  </or>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.bonitasoft.studio.connectors.newImplementation"
               icon="icons/connector_implem-new.png"
               label="%newConnectorImplementationMenu"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <and>
                  <count
                        value="1">
                  </count>
                  <or>
                     <iterate>
                        <instanceof
                              value="org.eclipse.core.resources.IProject">
                        </instanceof>
                        <test
                              property="org.bonitasoft.studio.application.isBonitaProject">
                        </test>
                     </iterate>
                  </or>
               </and>
            </visibleWhen>
         </command>
         <separator
               name="groupConnector2"
               visible="true">
         </separator>
      </menuContribution>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.synchronizer">
      <synchronier
            class="org.bonitasoft.studio.connectors.configuration.ConnectorsConfigurationSynchronizer">
      </synchronier>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.wizardPage">
      <configurationWizardPage
            class="org.bonitasoft.studio.connectors.configuration.ConnectorConfigurationWizardPage"
            priority="3">
      </configurationWizardPage>
   </extension>
   <extension
         point="org.bonitasoft.studio.common.barResourcesProvider">
      <barResourceProvider
            providerClass="org.bonitasoft.studio.connectors.configuration.ConnectorBarResourceProvider">
      </barResourceProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.bosArchiveProvider">
      <bosArchiveProvider
            providerClass="org.bonitasoft.studio.connectors.repository.ConnectorResourceProvider">
      </bosArchiveProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.exportConfigurationAction">
      <exportConfigurationAction
            class="org.bonitasoft.studio.connectors.configuration.ExportConnectorAction">
      </exportConfigurationAction>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.bonitasoft.studio.preferences.pages.BPM"
            class="org.bonitasoft.studio.connectors.ui.preferences.DBConnectorsPreferencePage"
            id="org.bonitasoft.studio.preferences.dbconnectors"
            name="DBConnectors">
      </page>
   </extension>
   <extension
         point="org.bonitasoft.studio.connectors.connectorWizard">
      <connectorWizard
            DefinitionId="scripting-groovy-script"
            canFinishProvider="org.bonitasoft.studio.connectors.ui.wizard.custom.GroovyScriptConfigurationWizardPage"
            priority="1"
            useDefaultGeneratedPages="false"
            useDefaultOutputPage="true">
         <configurationPage
               page="org.bonitasoft.studio.connectors.ui.wizard.custom.GroovyScriptConfigurationWizardPage">
         </configurationPage>
      </connectorWizard>
   </extension>
</plugin>
