<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension
         point="org.eclipse.emf.ecore.generated_package">
      <package
            uri="http://www.bonitasoft.org/organization"
            class="org.bonitasoft.studio.actors.model.organization.OrganizationPackage">
      </package>
   </extension>
   <extension
         point="org.eclipse.emf.ecore.extension_parser">
      <parser
            type="organization"
            class="org.bonitasoft.studio.actors.model.organization.util.OrganizationResourceFactoryImpl">
      </parser>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=org.bonitasoft.studio.menu.edit">
         <menu
               label="%actors_Label"
               id="org.bonitasoft.studio.actor.organizationMenu">
            <command
                  commandId="org.bonitasoft.studio.organization.manage"
                  icon="icons/manage.png"
                  style="push">
            </command>
            <separator
                  name="separator0"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.organization.publish"
                  icon="icons/synchronize.png"
                  style="push">
            </command>
            <separator
                  name="separator1"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.actors.export"
                  icon="icons/organization_export.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.actors.import"
                  icon="icons/organization_import.png"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:org.bonitasoft.studio.development?after=org.bonitasoft.studio.menu.connector">
         <menu
               label="%Filters"
               icon="icons/actor_filter.png"
               id="org.bonitasoft.studio.menu.filter">
            <command
                  commandId="org.bonitasoft.studio.actors.newFilterDef"
                  icon="icons/actor_filter-def-new.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.actors.editFilterDef"
                  icon="icons/actor_filter-def-edit.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.actors.separator"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.actors.newFilterImpl"
                  icon="icons/actor_filter-implem-new.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.actors.editFilterImpl"
                  icon="icons/actor_filter-implem-edit.png"
                  style="push">
            </command>
            <separator
                  name="org.bonitasoft.studio.actors.separator1"
                  visible="true">
            </separator>
            <command
                  commandId="org.bonitasoft.studio.actors.filter.export"
                  icon="icons/actor_filter-export.png"
                  style="push">
            </command>
            <command
                  commandId="org.bonitasoft.studio.actors.filter.import"
                  icon="icons/actor_filter-import.png"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.bonitasoft.studio.application.project.explorer.new?after=org.bonitasoft.studio.application.placeholder.organization">
         <command
               commandId="org.bonitasoft.studio.organization.manage"
               id="org.bonitasoft.studio.organization.manage.popup.menu"
               label="%newOrganizationLabel"
               mnemonic="O"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <and>
                  <count
                        value="1">
                  </count>
                  <or>
                     <iterate>
                        <instanceof
                              value="org.eclipse.core.resources.IProject">
                        </instanceof>
                        <test
                              property="org.bonitasoft.studio.application.isBonitaProject">
                        </test>
                     </iterate>
                  </or>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.bonitasoft.studio.application.project.explorer.new?after=org.bonitasoft.studio.application.placeholder.actor">
         <command
               commandId="org.bonitasoft.studio.actors.newFilterDef"
               label="%newFilterDefMenu"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <and>
                  <count
                        value="1">
                  </count>
                  <or>
                     <iterate>
                        <instanceof
                              value="org.eclipse.core.resources.IProject">
                        </instanceof>
                        <test
                              property="org.bonitasoft.studio.application.isBonitaProject">
                        </test></iterate>
                  </or>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.bonitasoft.studio.actors.newFilterImpl"
               label="%newFilterImplMenu"
               style="push">
            <visibleWhen
                  checkEnabled="true">
               <and>
                  <count
                        value="1">
                  </count>
                  <or>
                     <iterate>
                        <instanceof
                              value="org.eclipse.core.resources.IProject">
                        </instanceof>
                        <test
                              property="org.bonitasoft.studio.application.isBonitaProject">
                        </test>
                     </iterate>
                  </or>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.ExportOrganizationHandler"
            name="%export_Label"
            id="org.bonitasoft.studio.actors.export">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.NewFilterDefinitionHandler"
            name="%newFilterDef"
            id="org.bonitasoft.studio.actors.newFilterDef">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.EditFilterDefinitionHandler"
            name="%editFilterDef"
            id="org.bonitasoft.studio.actors.editFilterDef">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.NewFilterImplementationHandler"
            name="%newFilterImpl"
            id="org.bonitasoft.studio.actors.newFilterImpl">
      </command>
      <command
            name="%installOrganization"
            id="org.bonitasoft.studio.engine.installOrganization">
         <commandParameter
               name="artifact"
               optional="false"
               id="artifact">
         </commandParameter>
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.EditFilterImplementationHandler"
            name="%editFilterImpl"
            id="org.bonitasoft.studio.actors.editFilterImpl">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.ExportActorFilterHandler"
            name="%export_Label"
            id="org.bonitasoft.studio.actors.filter.export">
      </command>
      <command
            defaultHandler="org.bonitasoft.studio.actors.ui.handler.ImportActorFilterHandler"
            name="%import_Label"
            id="org.bonitasoft.studio.actors.filter.import">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs
            contributorId="org.bonitasoft.studio.diagram">
         <propertyTab
               label="%actor_tab_label"
               category="domain"
               afterTab="tab.data"
               id="tab.actors">
         </propertyTab>
      </propertyTabs>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections
            contributorId="org.bonitasoft.studio.diagram">
         <propertySection
               filter="org.bonitasoft.studio.actors.ui.section.filter.AssignableActorsFilter"
               tab="tab.actors"
               class="org.bonitasoft.studio.actors.ui.section.AssignableActorsPropertySection"
               enablesFor="1"
               id="section.assignable.actors"
               viewID="org.bonitasoft.studio.views.properties.process.general">
         </propertySection>
         <propertySection
               filter="org.bonitasoft.studio.actors.ui.section.filter.ProcessActorsFilter"
               tab="tab.actors"
               class="org.bonitasoft.studio.actors.ui.section.ProcessActorsPropertySection"
               enablesFor="1"
               id="section.process.actors"
               viewID="org.bonitasoft.studio.views.properties.process.general">
         </propertySection>
         <propertySection
               filter="org.bonitasoft.studio.actors.ui.section.filter.LaneActorFilter"
               tab="tab.actors"
               class="org.bonitasoft.studio.actors.ui.section.LaneAssignableActorsPropertySection"
               enablesFor="1"
               id="section.lane.actors"
               viewID="org.bonitasoft.studio.views.properties.process.general">
         </propertySection>
      </propertySections>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.wizardPage">
      <configurationWizardPage
            priority="0"
            class="org.bonitasoft.studio.actors.configuration.ActorMappingConfigurationWizardPage">
      </configurationWizardPage>
      <configurationWizardPage
            priority="6"
            class="org.bonitasoft.studio.actors.configuration.ActorFilterConfigurationWizardPage">
      </configurationWizardPage>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.importConfigurationAction">
      <importConfigurationAction
            class="org.bonitasoft.studio.actors.action.ImportActorMappingAction">
      </importConfigurationAction>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.exportConfigurationAction">
      <exportConfigurationAction
            class="org.bonitasoft.studio.actors.action.ExportActorMappingAction">
      </exportConfigurationAction>
      <exportConfigurationAction
            class="org.bonitasoft.studio.actors.configuration.ExportActorFiltersAction">
      </exportConfigurationAction>
   </extension>
   <extension
         point="org.bonitasoft.studio.repositoryStore">
      <repositoryStore
            class="org.bonitasoft.studio.actors.repository.OrganizationRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.actors.repository.ActorFilterSourceRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.actors.repository.ActorFilterDefRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.actors.repository.ActorFilterImplRepositoryStore">
      </repositoryStore>
      <repositoryStore
            class="org.bonitasoft.studio.actors.repository.ActorFilterConfRepositoryStore">
      </repositoryStore>
   </extension>
   <extension
         point="org.bonitasoft.studio.repository.fileContribution">
      <fileContribution
            class="org.bonitasoft.studio.actors.repository.DefaultOrganizationContribution">
      </fileContribution>
   </extension>
   <extension
         point="org.bonitasoft.studio.configuration.synchronizer">
      <synchronier
            class="org.bonitasoft.studio.actors.configuration.ActorFiltersConfigurationSynchronizer">
      </synchronier>
      <synchronier
            class="org.bonitasoft.studio.actors.configuration.ActorMappingConfigurationSynchronizer">
      </synchronier>
   </extension>
   <extension
         point="org.bonitasoft.studio.common.barResourcesProvider">
      <barResourceProvider
            providerClass="org.bonitasoft.studio.actors.configuration.ActorFilterBarResourceProvider">
      </barResourceProvider>
   </extension>
   <extension
         point="org.bonitasoft.studio.bosArchiveProvider">
      <bosArchiveProvider
            providerClass="org.bonitasoft.studio.actors.repository.ActorFilterResourceProvider">
      </bosArchiveProvider>
   </extension>
   <extension
         point="org.eclipse.emf.edapt.migrators">
      <migrator
            path="model/Organization.history">
      </migrator>
   </extension>
   <extension
         point="org.bonitasoft.studio.engine.postEngineAction">
      <action
            class="org.bonitasoft.studio.actors.action.PublishActiveOrganizationAction">
      </action>
   </extension>
   <extension
         point="org.bonitasoft.studio.connectors.connectorWizard">
      <connectorWizard
            DefinitionId="custom-user-info"
            useDefaultOutputPage="true"
            priority="5"
            useDefaultGeneratedPages="false">
         <configurationPage
               page="org.bonitasoft.studio.actors.ui.wizard.connector.CustomUserInfoConnectorConfigurationWizardPage">
         </configurationPage>
      </connectorWizard>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="org.bonitasoft.studio.engine.installOrganization"
            class="org.bonitasoft.studio.actors.ui.handler.InstallOrganizationHandler">
         <activeWhen>
            <reference
                  definitionId="isABonitaProduct">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="org.bonitasoft.studio.actors.ui.handler.ImportOrganizationHandler"
            commandId="org.bonitasoft.studio.application.import">
         <activeWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <test
                        property="org.bonitasoft.studio.actors.isOrganizationFolder">
                  </test>
               </iterate>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.bonitasoft.studio.actors.ui.handler.ExportOrganizationHandler"
            commandId="org.bonitasoft.studio.application.export">
         <activeWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <or>
                     <test
                           property="org.bonitasoft.studio.actors.isOrganizationFolder">
                     </test>
                     <test
                           property="org.bonitasoft.studio.actors.isOrganizationFile">
                     </test></or>
               </iterate>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.bonitasoft.studio.actors.ui.handler.ManageOrganizationHandler"
            commandId="org.bonitasoft.studio.application.newWithWizard">
         <activeWhen>
            <and>
               <count
                     value="1">
               </count>
               <iterate>
                  <test
                        property="org.bonitasoft.studio.actors.isOrganizationFolder">
                  </test>
               </iterate>
            </and>
         </activeWhen>
      </handler>
   </extension>
   <extension
         id="org.bonitasoft.studio.actors.fragment"
         point="org.eclipse.e4.workbench.model">
      <fragment
            uri="fragment.e4xmi">
      </fragment>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.bonitasoft.studio.actors.ui.handler.OrganizationPropertyTester"
            id="org.bonitasoft.studio.actors.organizationTester"
            namespace="org.bonitasoft.studio.actors"
            properties="isOrganizationFolder,isOrganizationFile"
            type="org.eclipse.core.runtime.IAdaptable">
      </propertyTester>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="org.bonitasoft.studio.organization.manage"
            icon="icons/organization.png">
      </image>
      <image
            commandId="org.bonitasoft.studio.actors.newFilterDef"
            icon="icons/actor_filter-def-new.png">
      </image>
      <image
            commandId="org.bonitasoft.studio.actors.newFilterImpl"
            icon="icons/actor_filter-implem-new.png">
      </image>
   </extension>

</plugin>
